{"ast":null,"code":"import _toConsumableArray from \"/home/vytautas/react-projects/matched-betting/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/home/vytautas/react-projects/matched-betting/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"/home/vytautas/react-projects/matched-betting/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/vytautas/react-projects/matched-betting/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/vytautas/react-projects/matched-betting/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/vytautas/react-projects/matched-betting/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/vytautas/react-projects/matched-betting/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/vytautas/react-projects/matched-betting/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/vytautas/react-projects/matched-betting/src/App.js\";\nimport React from \"react\";\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      backStake: \"10.00\",\n      totalBackOdds: \"0.00\",\n      acca: [{\n        name: \"leg1\",\n        backOdds: \"\",\n        layOdds: \"\",\n        commision: \"\",\n        layStake: \"\"\n      }],\n      legCount: 1\n    };\n\n    _this.handleInputChange = function (event) {\n      var legName = event.currentTarget.parentNode.getAttribute(\"name\");\n      var legInput = event.currentTarget.getAttribute(\"name\");\n      var value = event.currentTarget.value;\n\n      if (legInput === \"backStake\" || legInput === \"totalBackOdds\") {\n        _this.setState(_defineProperty({}, legInput, value));\n      } else {\n        _this.setState(function (prevState) {\n          return {\n            acca: prevState.acca.map(function (leg) {\n              if (leg.name === legName) {\n                return Object.assign(leg, _defineProperty({}, legInput, value));\n              } else {\n                return leg;\n              }\n            })\n          };\n        });\n      }\n    };\n\n    _this.handleAddLeg = function () {\n      var legCount = _this.state.legCount;\n      var name = \"leg\".concat(legCount + 1);\n      var leg = {\n        name: name,\n        backOdds: \"\",\n        layOdds: \"\",\n        commision: \"\",\n        layStake: \"\"\n      };\n\n      _this.setState(function (prevState) {\n        return {\n          acca: prevState.acca.concat(_objectSpread({}, leg)),\n          legCount: prevState.legCount + 1\n        };\n      });\n    };\n\n    _this.handleRemoveLeg = function (event) {\n      var legName = event.currentTarget.parentNode.getAttribute(\"name\");\n\n      var legIndex = _this.state.acca.findIndex(function (leg) {\n        return leg.name === legName;\n      });\n\n      _this.setState(function (prevState) {\n        return {\n          acca: _toConsumableArray(prevState.acca.slice(0, legIndex)).concat(_toConsumableArray(prevState.acca.slice(legIndex + 1)))\n        };\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var totalBackOdds = this.state.acca.reduce(function (total, leg) {\n        return Number((leg.backOdds * total).toFixed(3));\n      }, 1);\n      if (this.state.acca !== prevState.acca) this.setState({\n        totalBackOdds: totalBackOdds\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // const acca = this.state.acca;\n      // const lastLegLay = ((this.state.backStake * this.state.totalBackOdds) /\n      //     (acca[acca.length - 1].layOdds -\n      //     (acca[acca.length - 1].commision / 100))).toFixed(2);\n      // for (let i = acca.length - 1; i >= 0; i--) {\n      //     if (acca[i] == acca[acca.length - 1]) {\n      //         Object.assign(acca[i], {layStake: lastLegLay})\n      //     } else {\n      //         Object.assign(acca[i], {layStake:\n      //             Math.floor(\n      //             acca[i + 1].layStake * (1 - (acca[i + 1].commision / 100)) /\n      //             (acca[i].layOdds - (acca[i].commision / 100)) * 100) / 100\n      //         })\n      //     }\n      // }\n      var listLegs = this.state.acca.map(function (leg) {\n        return React.createElement(LegInputs, {\n          key: leg.name,\n          name: leg.name,\n          backOdds: leg.backOdds,\n          layOdds: leg.layOdds,\n          commision: leg.commision,\n          layStake: leg.layStake,\n          handleChange: _this2.handleInputChange,\n          removeLeg: _this2.handleRemoveLeg,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        });\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        name: \"backStake\",\n        value: this.state.backStake,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        name: \"totalBackOdds\",\n        value: this.state.totalBackOdds,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }), listLegs, React.createElement(\"button\", {\n        onClick: this.handleAddLeg,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Add leg\"));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nfunction LegInputs(props) {\n  return React.createElement(\"div\", {\n    name: props.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    value: props.backOdds,\n    name: \"backOdds\",\n    onChange: props.handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    value: props.layOdds,\n    name: \"layOdds\",\n    onChange: props.handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    value: props.commision,\n    name: \"commision\",\n    onChange: props.handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    value: props.layStake,\n    name: \"layStake\",\n    onChange: props.handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }), props.name !== \"leg1\" && React.createElement(\"button\", {\n    onClick: props.removeLeg,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"Remove leg\"));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/vytautas/react-projects/matched-betting/src/App.js"],"names":["React","App","state","backStake","totalBackOdds","acca","name","backOdds","layOdds","commision","layStake","legCount","handleInputChange","event","legName","currentTarget","parentNode","getAttribute","legInput","value","setState","prevState","map","leg","Object","assign","handleAddLeg","concat","handleRemoveLeg","legIndex","findIndex","slice","prevProps","reduce","total","Number","toFixed","listLegs","Component","LegInputs","props","handleChange","removeLeg"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nclass App extends React.Component {\n    \n    state = {\n        backStake: \"10.00\",\n        totalBackOdds: \"0.00\",\n        acca: [\n            {\n                name: \"leg1\",\n                backOdds: \"\",\n                layOdds: \"\",\n                commision: \"\",\n                layStake: \"\"\n            }\n        ],\n        legCount: 1\n    };\n    \n    componentDidUpdate(prevProps, prevState) {\n        const totalBackOdds = this.state.acca.reduce((total, leg) => {\n            return Number((leg.backOdds * total).toFixed(3));\n            }, 1);\n        \n        if (this.state.acca !== prevState.acca)\n            this.setState({totalBackOdds})\n    }\n\n    handleInputChange = (event) => {\n        const legName = event.currentTarget.parentNode.getAttribute(\"name\");\n        const legInput = event.currentTarget.getAttribute(\"name\");\n        const value = event.currentTarget.value;\n        if (legInput === \"backStake\" || legInput === \"totalBackOdds\") {\n            this.setState({\n                [legInput]: value\n            });\n        } else {\n            this.setState(prevState => ({\n                acca: prevState.acca.map(\n                leg => {\n                    if (leg.name === legName) {\n                        return Object.assign(leg, { [legInput]: value })\n                    } else {\n                        return leg\n                    }\n                }),\n            }));\n        }\n    }\n\n    handleAddLeg = () => {\n        const legCount = this.state.legCount;\n        const name = `leg${legCount + 1}`;\n        const leg = {\n            name,\n            backOdds: \"\",\n            layOdds: \"\",\n            commision: \"\",\n            layStake: \"\"\n        };\n        this.setState(prevState => ({\n            acca: prevState.acca.concat({...leg}),\n            legCount: prevState.legCount + 1\n            })\n        );\n    }\n    \n    handleRemoveLeg = (event) => {\n        const legName = event.currentTarget.parentNode.getAttribute(\"name\");\n        const legIndex = this.state.acca.findIndex(leg => \n            leg.name === legName);\n        this.setState(prevState => ({\n            acca: [\n                ...prevState.acca.slice(0, legIndex),\n                ...prevState.acca.slice(legIndex + 1)\n            ]\n        }));\n    }\n\n    render() {\n        // const acca = this.state.acca;\n        // const lastLegLay = ((this.state.backStake * this.state.totalBackOdds) /\n        //     (acca[acca.length - 1].layOdds -\n        //     (acca[acca.length - 1].commision / 100))).toFixed(2);\n\n        // for (let i = acca.length - 1; i >= 0; i--) {\n        //     if (acca[i] == acca[acca.length - 1]) {\n        //         Object.assign(acca[i], {layStake: lastLegLay})\n        //     } else {\n        //         Object.assign(acca[i], {layStake:\n        //             Math.floor(\n        //             acca[i + 1].layStake * (1 - (acca[i + 1].commision / 100)) /\n        //             (acca[i].layOdds - (acca[i].commision / 100)) * 100) / 100\n        //         })\n        //     }\n        // }\n\n        const listLegs = this.state.acca\n            .map(leg =>\n                <LegInputs\n                    key={leg.name}\n                    name={leg.name}\n                    backOdds={leg.backOdds}\n                    layOdds={leg.layOdds}\n                    commision={leg.commision}\n                    layStake={leg.layStake}\n                    handleChange={this.handleInputChange}\n                    removeLeg={this.handleRemoveLeg}\n                />\n        );\n\n        return (\n            <div>\n                <input\n                    name=\"backStake\"\n                    value={this.state.backStake}\n                    onChange={this.handleInputChange}\n                />\n                <input\n                    name=\"totalBackOdds\"\n                    value={this.state.totalBackOdds}\n                    onChange={this.handleInputChange}\n                />\n                {listLegs}\n                <button onClick={this.handleAddLeg}>Add leg</button>\n            </div>\n        );\n    }\n}\n\nfunction LegInputs(props) {\n    return (\n        <div name={props.name}>\n            <input type=\"text\" value={props.backOdds}\n                name=\"backOdds\" onChange={props.handleChange} />\n            <input type=\"text\" value={props.layOdds}\n                name=\"layOdds\" onChange={props.handleChange} />\n            <input type=\"text\" value={props.commision}\n                name=\"commision\" onChange={props.handleChange} />\n            <input type=\"text\" value={props.layStake}\n                name=\"layStake\" onChange={props.handleChange} />\n            {props.name !== \"leg1\" && \n                <button onClick={props.removeLeg}>Remove leg</button>}\n        </div>\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}